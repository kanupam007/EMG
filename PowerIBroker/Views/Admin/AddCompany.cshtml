@model PowerIBroker.Areas.Broker.Models.Company
@{
    ViewBag.Title = "Add Company";
    Layout = "~/Views/Shared/_emgadminlayout.cshtml";
}

<meta name="viewport" content="width=device-width" />
<link href="~/Content/Admin/css/stylesheet.css" rel="stylesheet" />
@*<link rel="stylesheet" href="@Url.Content("~/Areas/Broker/Content/css/validate.css")" />*@
<script>
    document.title = '@ViewBag.Title';
</script>
<script src="~/Content/Frontend/js/jquery-ui.min.js"></script>
<link href="/Content/Frontend/css/font-awesome.min.css" rel="stylesheet" />
<link href="~/Content/Frontend/css/jquery-ui.css" rel="stylesheet" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript" src="@Url.Content("/Areas/Employee/Content/js/maskedinput.js")"></script>

<link href="~/AdminContent/plugins/datatables/jquery.dataTables.css" rel="stylesheet" />
<script src="~/AdminContent/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/AdminContent/customjs/admincustom_masking_autocomplete.js"></script>
<script src="~/AdminContent/customjs/admincustom.js"></script>
<link href="~/AdminContent/jquery.datepick.css" type="text/css" rel="stylesheet" />
<script src="~/AdminContent/customjs/jquery.plugin.js"></script>
<script src="~/AdminContent/customjs/jquery.datepick.js"></script>
<link href="~/AdminContent/jquery.datepick.css" rel="stylesheet" />
<style>
    .form-control.calender {
        background: url(/AdminContent/calender_icon.png) no-repeat right;
        background-color: #fff !important;
    }
</style>
<section class="content">
    <!-- Info boxes -->
    <div class="col-lg-12" style="padding-right:0px;padding-left:0px">
        <div class="@(TempData["CustomMessage"] != null ? TempData["MessageType"] == "Success" ? "alert alert-success" : "alert alert-danger" : "")">
            @if (TempData["CustomMessage"] != null)
            {
                <i class="fa @(TempData["MessageType"] == "Success" ? "fa fa-check" : "fa fa-times-circle")"></i>

            }
            <span>@TempData["CustomMessage"]</span>
        </div>
    </div>

    <div class="row">
        @using (Html.BeginForm("AddCompany", "Admin", FormMethod.Post, new { @id = "frmAddProduct" }))
        {
            @Html.HiddenFor(m => m.ID, new { @class = "cID" })
            @Html.HiddenFor(m => m.SubBrokerId)
            @Html.ValidationSummary(true)

            <input type="hidden" id="hdnsubrokeruserids" name="hdnsubrokeruserids" />
            <div class="col-md-12">
                <div>
                    <!-- /.box-header -->
                    <div class="box-body">

                        <fieldset>
                            <legend>
                                Add Company <span style="color:red; font-size:12px;">
                                    Note * indicates required field
                                </span> <span style="float: right; margin-right: 20px !important; font-size: 15px;">
                                    @if (Model.ID != 0)
                                    {
                                        <label for="exampleInputEmail1">IsActive &nbsp;</label> @Html.CheckBoxFor(m => m.IsActive, new { @class = "checkBx" })
                                    }
                                </span>
                            </legend>
                            <div class="clearfix">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">EMG Customer Number</label>
                                        @Html.TextBoxFor(m => m.CustomerCode, new { placeholder = "EMG Customer Number", @class = "form-control", @maxlength = 10 })
                                    </div>
                                </div>

                            </div>
                            <div class="clearfix">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Company Name <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CCompanyName, new { placeholder = "Company Name", @class = "form-control", @maxlength = 100 })

                                    </div>
                                </div>


                            </div>
                            <div class="clearfix">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Street Name <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CStreetName, new { placeholder = "Street Name", @class = "form-control", @maxlength = 100 })
                                    </div>
                                </div>

                            </div>
                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">City <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CCityName, new { placeholder = "City", @class = "form-control", @maxlength = 40 })
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">State <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CStateName, new { placeholder = "State", @class = "form-control", @maxlength = 40 })

                                    </div>
                                </div>

                            </div>
                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Zip Code <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CZipCode, new { placeholder = "Zip Code", @class = "form-control", @maxlength = 5 })
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Country <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CCountryName, new { placeholder = "Country", @class = "form-control", @maxlength = 40 })
                                    </div>
                                </div>

                            </div>
                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Work Phone <span style="color:red;">*</span></label>
                                        @Html.TextBoxFor(m => m.CContact, new { placeholder = "Work Phone", @class = "form-control phonemask phoneChk" })
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">URL</label>
                                        @Html.TextBoxFor(m => m.URL, new { placeholder = "URL", @class = "form-control", @maxlength = 100 })

                                    </div>
                                </div>
                            </div>

                        </fieldset>

                        <fieldset>
                            <legend>Company Administrators</legend>

                            <a href="javascript:void(0)" data-id="@Model.ID" class="btn btn-primary clsaddmoreadmin">+ Additional Admin</a>

                            <input type="hidden" id="hdnEmpId" name="hdnEmpId" />

                            <div id="companyList">
                                @Html.Partial("_CompanyList")
                            </div>

                            <div id="addCompany">
                                @Html.Partial("_AddCompany", Model)
                            </div>
                        </fieldset>


                        <fieldset>

                            <legend>Broker Company</legend>

                        </fieldset>

                        <div id="dropdownbrokercompany">

                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Broker Company </label>
                                    @Html.DropDownListFor(m => m.BrokerId, ViewBag.BrokerGet as SelectList, "Select", new { @class = "ddlBrokerIdchangeAddCompany form-control", @style = "margin-bottom:-25px;" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Effective Start Date</label>
                                @Html.TextBoxFor(m => m.BrokerStartDate, "{0:MM/dd/yyyy}", new { placeholder = "Effective Start Date", id = "datePicker1", @class = "form-control calender", @readonly = true, })<br />
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Effective End Date</label>
                                @Html.TextBoxFor(m => m.BrokerEndDate, "{0:MM/dd/yyyy}", new { placeholder = "Effective End Date", id = "datePicker2", @class = "form-control calender", @readonly = true })<br />

                            </div>
                        </div>



                        <div id="subBrokerList">
                            @Html.Action("_SubbrokerListCompany", "Admin", new { BrokerId = Model.BrokerId, Companyid = Model.ID })
                        </div>
                        <fieldset>
                            <legend>Customer Billing</legend>
                            @Html.HiddenFor(m => m.Billing.BillingId)
                            <div class="clearfix">
                                <div class="col-lg-12" style="padding: 0px 0px 0px 0px;">
                                    <div class="form-group">
                                        @if (Model.ID != 0)
                                        {
                                            if (Model.Billing.CompanyName == Model.CCompanyName)
                                            {
                                        <div class="col-lg-2">
                                            <input type="radio" name="radAdd" value="comAdd" class="radAdd" checked="checked" />
                                            <label for="exampleInputEmail1">Same as Company</label>
                                        </div>
                                        <div class="col-lg-2 rdBrokerAdd" style="display:none;">
                                            <input type="radio" name="radAdd" value="brokAdd" class="radAdd" /> <label for="exampleInputEmail1">Same as Broker</label>
                                        </div>
                                            }
                                            else
                                            {

                                        <div class="col-lg-2">
                                            <input type="radio" name="radAdd" value="comAdd" class="radAdd" />
                                            <label for="exampleInputEmail1">Same as Company</label>
                                        </div>
                                        <div class="col-lg-2 rdBrokerAdd">
                                            <input type="radio" name="radAdd" value="brokAdd" class="radAdd" checked="checked" /> <label for="exampleInputEmail1">Same as Broker</label>
                                        </div>


                                            }
                                        }
                                        else
                                        {
                                        <div class="col-lg-2">
                                            <input type="radio" name="radAdd" value="comAdd" class="radAdd" />
                                            <label for="exampleInputEmail1">Same as Company</label>
                                        </div>
                                        <div class="col-lg-2 rdBrokerAdd">
                                            <input type="radio" name="radAdd" value="brokAdd" class="radAdd" /> <label for="exampleInputEmail1">Same as Broker</label>
                                        </div>
                                        }



                                        <div class="col-lg-3">
                                            <a href="javascript:void(0)" class="btn btn-primary resetFields" style="padding: 2px 10px;">Reset</a>

                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Company or Broker Name <span style="color:red;">*</span></label>

                                        @Html.TextBoxFor(m => m.Billing.CompanyName, new { placeholder = "Company Name", @class = "form-control", @maxlength = 100 })

                                    </div>
                                </div>

                            </div>
                            <div class="clearfix">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Street Name <span style="color:red;">*</span></label>

                                        @Html.TextBoxFor(m => m.Billing.StreetName, new { placeholder = "Street Name", @class = "form-control", @maxlength = 100 })

                                    </div>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">City <span style="color:red;">*</span></label>

                                        @Html.TextBoxFor(m => m.Billing.City, new { placeholder = "City", @class = "form-control", @maxlength = 40 })

                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">State <span style="color:red;">*</span></label>

                                        @Html.TextBoxFor(m => m.Billing.State, new { placeholder = "State", @class = "form-control", @maxlength = 40 })

                                    </div>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Zip Code <span style="color:red;">*</span></label>

                                        @Html.TextBoxFor(m => m.Billing.ZipCode, new { placeholder = "Zip Code", @class = "form-control", @maxlength = 5 })

                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Country <span style="color:red;">*</span></label>

                                        @Html.TextBoxFor(m => m.Billing.Country, new { placeholder = "Country", @class = "form-control", @maxlength = 40 })

                                    </div>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Billing Phone</label>

                                        @Html.TextBoxFor(m => m.Billing.Phone, new { placeholder = "Billing Phone", @class = "form-control phonemask" })

                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Billing Fax</label>
                                        @Html.TextBoxFor(m => m.Billing.Fax, new { placeholder = "Billing Fax", @class = "form-control", @maxlength = 50 })
                                    </div>
                                </div>
                            </div>
                        </fieldset>


                        <fieldset>
                            <legend>EDI</legend>


                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">ISA05 Interchange ID Qualifier(ZZ,30)</label>
                                        @Html.TextBoxFor(m => m.ISA05IDQualifierFedTaxID, new { placeholder = "ZZ or 30", @class = "form-control phonemask phoneChk" })
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">ISA06 Interchange Sender ID</label>
                                        @Html.TextBoxFor(m => m.ISA06SenderID, new { placeholder = "Sender ID", @class = "form-control", @maxlength = 100 })

                                    </div>
                                </div>
                            </div>

                            <div class="clearfix">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">ISA07 Interchange ID Qualifier(20) </label>
                                        @Html.TextBoxFor(m => m.ISA07IDQualifier, new { placeholder = "20", @class = "form-control phonemask phoneChk" })
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">ISA08 Interchange Receiver ID</label>
                                        @Html.TextBoxFor(m => m.ISA08ReceiverID, new { placeholder = "Receiver ID", @class = "form-control", @maxlength = 100 })

                                    </div>
                                </div>
                            </div>
                        </fieldset>

                    </div>
                </div>
                <div class="clearfix">
                    <button type="button" id="btnaddcompanybrokerassign" style="margin-left:10px!important;" class="btn btn-primary">Save</button>
                </div>

                <!-- /.box -->
            </div><!-- /.col -->
        }
    </div>
    <div id="LoadMain" style="display:none">
        <div id="load">
            <img src="~/Areas/Employee/Content/images/loading(1).gif" class="ajax-loader" />
        </div>
    </div>

</section>
<div class="modal fade" id="myModal" role="dialog">
</div>

<script>
    if ($(".cID").val() == 0) {
        $(".rdBrokerAdd").css('display', 'none');
    }

    $("#btnaddcompanybrokerassign").click(function () {
        var brokerid = $(".ddlBrokerIdchangeAddCompany").val();
        if (brokerid > 0) {
            $(".rdBrokerAdd").css('display', 'block');
            var selectedval = "";
            var arr = $('input[name="subbrokerChk"]:checked');
            arr.each(function () {
                if (selectedval == "") {
                    selectedval = $(this).val();
                }
                else {
                    selectedval = selectedval + "," + $(this).val();
                }
            });

            $("#SubBrokerId").val(selectedval);
            //if (selectedval == "") {
            //    toastr["error"]("Please select atleast one user", "Error !");
            //    return false
            //}
            //else {
            //    $("#SubBrokerId").val(selectedval);
            //}
        }
        $(".rdBrokerAdd").css('display', 'none');
        //$(".resetFields").css('display', 'none');
        $("#frmAddProduct").submit();
    })

</script>
<script>
    if ($('#datePicker1').val() != "") {
        $('#datePicker1').val($('#datePicker1').val().split(' ')[0])
    }
    if ($('#datePicker2').val() != "") {
        $('#datePicker2').val($('#datePicker2').val().split(' ')[0])
    }
    $('#datePicker1').datepick({
        maxDate: '0'
    });
    $('#datePicker2').datepick({ minDate: '0' });
</script>
